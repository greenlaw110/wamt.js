var wamt={time:new Date,delta:0,fps:0,behaviours:{}};wamt.support={canvas:typeof window.CanvasRenderingContext2D!="undefined",light:typeof window.CanvasRenderingContext2D.prototype.createRadialGradient!="undefined"&&typeof window.CanvasRenderingContext2D.prototype.setShadow!="undefined"};wamt.settings={culling:!0};Math.radians=function(a){return a*Math.PI/180};Math.degrees=function(a){return a*180/Math.PI};
window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();wamt.play=function(a){a.worker=setInterval(function(){a.logic()},1E3/60)};wamt.pause=function(a){clearInterval(a.worker)};
wamt.process=function(a,b){var c=new Date;wamt.delta=c-wamt.time;wamt.fps=Math.round(1E3/wamt.delta);wamt.time=c;var c=a.layers,d=b.canvas,e=b.context;if(a.updated||b.updated){e.save();e.scale(b.zoom,b.zoom);b.clearCanvas();b.renderBackdrop();var f=b.target;if(typeof f!="undefined")b.x=f.x,b.y=f.y;for(var f=d.width,d=d.height,g=0;g<c.length;g++){var i=c[g];e.globalCompositeOperation=i.composite;var h=i.opacity;e.globalAlpha=h;for(var j=i.objects,l=0;l<j.length;l++){var k=j[l];k.tick(a,i,b);if(typeof k.render!=
"undefined"&&k.visible){var m=k.opacity;if(m!=1)e.globalAlpha=h*m;if(wamt.settings.culling){var m=k.screenX+k.bounds[0],n=k.screenY+k.bounds[1],o=f+k.bounds[0]*2,p=d+k.bounds[1]*2;m>=-o&&m<=o&&n>=-p&&n<=p&&k.render(b)}else k.render(b);e.globalAlpha=h}}i.processEvent("tick",{scene:a,view:b});i.processEvent("render",{scene:a,view:b})}a.processEvent("tick",{scene:a,view:b});a.processEvent("render",{scene:a,view:b});a.updated=!1;b.updated=!1;e.restore()}else{for(g=0;g<c.length;g++){i=c[g];j=i.objects;
for(l=0;l<j.length;l++)j[l].tick(a,i,b);i.processEvent("tick",{scene:a,view:b})}a.processEvent("tick",{scene:a,view:b})}};wamt.Layer=function(a,b){this.events=[];this.scene=a;this.index=b;this.objects=[];this.opacity=1;this.composite="source-over";this.locked=!1};wamt.Layer.prototype.constructor=wamt.Layer;wamt.Layer.prototype.addObject=function(a){a.scene=this.scene;a.layer=this;this.objects.push(a)};
wamt.Layer.prototype.removeObject=function(a){var b=this.objects;b.splice(b.indexOf(a),1);this.scene.updated=!0};wamt.Layer.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};wamt.Layer.prototype.clear=function(){this.objects=[];this.scene.updated=!0};wamt.Layer.prototype.setCompositeOperation=function(a){this.composite=a;this.scene.updated=!0};wamt.Layer.prototype.setLocked=function(a){this.locked=a;this.scene.updated=!0};
wamt.Layer.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};wamt.Layer.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Scene=function(){this.events=[];this.updated=!1;this.time=new Date;this.layers=[]};wamt.Scene.prototype.constructor=wamt.Scene;
wamt.Scene.prototype.getLayer=function(a){for(var b,c=this.layers,d=0;d<c.length;d++){var e=c[d];if(e.index==a){b=e;break}}return b};wamt.Scene.prototype.createLayer=function(a){var a=new wamt.Layer(this,a),b=this.layers;b.push(a);b.sort(function(a,b){if(a.index<b.index)return-1;return a.index>b.index?1:0});return a};
wamt.Scene.prototype.addObject=function(a,b){b=typeof b=="number"?b:0;c=this.getLayer(b);if(typeof c=="undefined")var c=this.createLayer(b);c.addObject(a);if(typeof a.render!="undefined")this.updated=!0};wamt.Scene.prototype.removeObject=function(a){this.getLayer(a.layer.index).removeObject(a)};wamt.Scene.prototype.clear=function(){this.layers=[];this.updated=!0};
wamt.Scene.prototype.logic=function(){for(var a=this.layers,b=0;b<a.length;b++)for(var c=a[b].objects,d=0;d<c.length;d++)c[d].logic(this);this.processEvent("logic",{scene:this})};wamt.Scene.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};wamt.Scene.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};
wamt.View=function(a,b,c){this.events=[];this.canvas=a;this.context=a.getContext("2d");this.x=typeof b=="undefined"?a.width/2:b;this.y=typeof c=="undefined"?a.height/2:c;this.zoom=1};wamt.View.prototype.constructor=wamt.View;
wamt.View.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b);var c=this;switch(a){case "mousemove":this.canvas.addEventListener("mousemove",function(a){b({original:a,view:c,context:c.context})},!1);break;case "mousedown":this.canvas.addEventListener("mousedown",function(a){b({original:a,view:c,context:c.context})},!1);break;case "mouseup":this.canvas.addEventListener("mouseup",function(a){b({original:a,view:c,context:c.context})},
!1);break;case "click":this.canvas.addEventListener("click",function(a){b({original:a,view:c,context:c.context})},!1)}};wamt.View.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.View.prototype.setBackdrop=function(a){this.backdrop=a};
wamt.View.prototype.renderBackdrop=function(){if(typeof this.backdrop!="undefined"){var a=this.canvas,b=this.context;this.backdrop instanceof Image?this.context.drawImage(this.backdrop,0,0,a.width,a.height):(b.fillStyle=this.backdrop,b.fillRect(0,0,a.width,a.height),b.fillStyle="")}};wamt.View.prototype.setCanvas=function(a){this.canvas=a;this.context=a.getContext("2d")};wamt.View.prototype.clearCanvas=function(){var a=this.canvas;this.context.clearRect(0,0,a.width,a.height)};
wamt.View.prototype.setTarget=function(a){this.target=a};wamt.View.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.View.prototype.setY=function(a){this.y=a;this.scene.updated=!0};wamt.View.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};wamt.View.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};wamt.View.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};
wamt.View.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};wamt.View.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};
wamt.Box=function(a,b,c,d,e,f){this.events=[];this.collideable=!0;this.x=typeof d=="undefined"?0:d;this.y=typeof e=="undefined"?0:e;this.velocity=[0,0];this.screenX=this.x;this.screenY=this.y;this.angle=typeof f=="undefined"?0:f;this.radians=typeof f=="undefined"?0:Math.radians(f);this.width=b;this.height=c;this.style=a;this.shadow=[0,0,0,"rgba(0,0,0,0)"];this.hollow=!1;this.visible=!0;this.opacity=1;this.computeBounds()};wamt.Box.prototype.constructor=wamt.Box;
wamt.Box.prototype.computeBounds=function(){this.bounds=this.angle==0||this.angle==180?[this.width,this.height]:this.angle==90||this.angle==270?[this.height,this.width]:[Math.abs(Math.cos(this.angle)*this.width),Math.abs(Math.sin(this.angle)*this.height)]};wamt.Box.prototype.setColliding=function(a){this.collideable=a};wamt.Box.prototype.setVisible=function(a){this.visible=a;this.scene.updated=!0};wamt.Box.prototype.setHollow=function(a){this.hollow=a;this.scene.updated=!0};
wamt.Box.prototype.logic=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prelogic(this);if(this.velocity[0]!=0||this.velocity[1]!=0)b?this.behaviour.velocity(this):this.translate(this.velocity[0],this.velocity[1]);b&&this.behaviour.logic(this);this.processEvent("logic",{object:this,scene:a})};
wamt.Box.prototype.tick=function(a,b,c){var d=typeof this.behaviour!="undefined";d&&this.behaviour.pretick(this);var e=c.canvas;if(a.updated)b.locked?(this.screenX=this.x,this.screenY=this.y):(this.screenX=-c.x+this.x+e.width/2,this.screenY=-c.y+this.y+e.height/2);d&&this.behaviour.tick(this);this.processEvent("tick",{object:this,scene:a,layer:b,view:c})};
wamt.Box.prototype.render=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prerender(this);var c=this.radians,d=a.context;d.strokeStyle=this.style;d.fillStyle=this.style;d.shadowOffsetX=this.shadow[0];d.shadowOffsetY=this.shadow[1];d.shadowBlur=this.shadow[2];d.shadowColor=this.shadow[3];if(c==0)this.hollow?d.strokeRect(this.screenX,this.screenY,this.width,this.height):d.fillRect(this.screenX,this.screenY,this.width,this.height);else{var e=this.width/2+this.screenX,f=this.height/
2+this.screenY;d.save();d.translate(e,f);d.rotate(c);d.translate(-e,-f);this.hollow?d.strokeRect(this.screenX,this.screenY,this.width,this.height):d.fillRect(this.screenX,this.screenY,this.width,this.height);d.restore()}a.context.strokeStyle="";a.context.fillStyle="";a.context.shadowOffsetX="";a.context.shadowOffsetY="";a.context.shadowBlur="";a.context.shadowColor="";b&&this.behaviour.render(this);this.processEvent("render",{object:this,view:a})};
wamt.Box.prototype.setWidth=function(a){a<1&&(a=1);this.width=a;this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.setHeight=function(a){a<1&&(a=1);this.height=a;this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.setSize=function(a,b){a<1&&(a=1);b<1&&(b=1);this.width=a;this.height=b;this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.stretchX=function(a){this.width+=a;if(this.width<1)this.width=1;this.computeBounds();this.scene.updated=!0};
wamt.Box.prototype.stretchY=function(a){this.height+=a;if(this.height<1)this.height=1;this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.stretch=function(a,b){this.width+=a;if(this.width<1)this.width=1;this.height+=b;if(this.height<1)this.height=1;this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.setStyle=function(a){this.style=a;this.scene.updated=!0};wamt.Box.prototype.setShadow=function(a,b,c,d){this.shadow=[a,b,c,d];this.scene.updated=!0};
wamt.Box.prototype.setShadowCasting=function(a){this.shadowcast=a;this.scene.updated=!0};wamt.Box.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};wamt.Box.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.Box.prototype.setY=function(a){this.y=a;this.scene.updated=!0};wamt.Box.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};wamt.Box.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};
wamt.Box.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};wamt.Box.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};wamt.Box.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};wamt.Box.prototype.setVelocity=function(a,b){this.velocity=[a,b];this.scene.updated=!0};wamt.Box.prototype.stop=function(){this.velocity=[0,0];this.scene.updated=!0};
wamt.Box.prototype.setAngle=function(a){this.angle=a%360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.rotate=function(a){this.angle+=a;this.angle%=360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Box.prototype.setBehaviour=function(a){this.behaviour=a;typeof a!="undefined"&&a.init(this);this.scene.updated=!0};
wamt.Box.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};wamt.Box.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Box.prototype.destroy=function(){this.scene.removeObject(this)};
wamt.Circle=function(a,b,c,d,e){this.events=[];this.collideable=!0;this.x=typeof c=="undefined"?0:c;this.y=typeof d=="undefined"?0:d;this.velocity=[0,0];this.screenX=this.x;this.screenY=this.y;this.angle=typeof e=="undefined"?0:e;this.radians=typeof e=="undefined"?0:Math.radians(e);this.radius=b;this.style=a;this.shadow=[0,0,0,"rgba(0,0,0,0)"];this.hollow=this.shadowcast=!1;this.visible=!0;this.opacity=1;this.computeBounds()};wamt.Circle.prototype.constructor=wamt.Circle;
wamt.Circle.prototype.computeBounds=function(){this.bounds=[this.radius*2,this.radius*2]};wamt.Circle.prototype.setColliding=function(a){this.collideable=a};wamt.Circle.prototype.setVisible=function(a){this.visible=a;this.scene.updated=!0};wamt.Circle.prototype.setHollow=function(a){this.hollow=a;this.scene.updated=!0};
wamt.Circle.prototype.logic=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prelogic(this);if(this.velocity[0]!=0||this.velocity[1]!=0)b?this.behaviour.velocity(this):this.translate(this.velocity[0],this.velocity[1]);b&&this.behaviour.logic(this);this.processEvent("logic",{object:this,scene:a})};
wamt.Circle.prototype.tick=function(a,b,c){var d=typeof this.behaviour!="undefined";d&&this.behaviour.pretick(this);var e=c.canvas;if(a.updated)b.locked?(this.screenX=this.x,this.screenY=this.y):(this.screenX=-c.x+this.x+e.width/2,this.screenY=-c.y+this.y+e.height/2);d&&this.behaviour.tick(this);this.processEvent("tick",{object:this,scene:a,layer:b,view:c})};
wamt.Circle.prototype.render=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prerender(this);var c=a.context,d=this.radians;c.fillStyle=this.style;c.strokeStyle=this.style;c.shadowOffsetX=this.shadow[0];c.shadowOffsetY=this.shadow[1];c.shadowBlur=this.shadow[2];c.shadowColor=this.shadow[3];if(d==0)c.beginPath(),c.arc(this.screenX,this.screenY,this.radius,0,Math.PI*2,!1),this.hollow?c.stroke():c.fill();else{var e=this.screenX,f=this.screenY;c.save();c.translate(e,f);c.rotate(d);
c.translate(-e,-f);c.beginPath();c.arc(this.screenX,this.screenY,this.radius,0,Math.PI*2,!1);this.hollow?c.stroke():c.fill();c.restore()}c.shadowOffsetX="";c.shadowOffsetY="";c.shadowBlur="";c.shadowColor="";c.fillStyle="";c.strokeStyle="";b&&this.behaviour.render(this);this.processEvent("render",{object:this,view:a})};wamt.Circle.prototype.setRadius=function(a){a<1&&(a=1);this.radius=a;this.computeBounds();this.scene.updated=!0};
wamt.Circle.prototype.stretch=function(a){this.radius+=a;if(this.radius<1)this.radius=1;this.computeBounds();this.scene.updated=!0};wamt.Circle.prototype.setStyle=function(a){this.style=a;this.scene.updated=!0};wamt.Circle.prototype.setShadow=function(a,b,c,d){this.shadow=[a,b,c,d];this.scene.updated=!0};wamt.Circle.prototype.setShadowCasting=function(a){this.shadowcast=a;this.scene.updated=!0};wamt.Circle.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};
wamt.Circle.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.Circle.prototype.setY=function(a){this.y=a;this.scene.updated=!0};wamt.Circle.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};wamt.Circle.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};wamt.Circle.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};wamt.Circle.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};
wamt.Circle.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};wamt.Circle.prototype.setVelocity=function(a,b){this.velocity=[a,b];this.scene.updated=!0};wamt.Circle.prototype.stop=function(){this.velocity=[0,0];this.scene.updated=!0};wamt.Circle.prototype.setAngle=function(a){this.angle=a%360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};
wamt.Circle.prototype.rotate=function(a){this.angle+=a;this.angle%=360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Circle.prototype.setBehaviour=function(a){this.behaviour=a;typeof a!="undefined"&&a.init(this);this.scene.updated=!0};wamt.Circle.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};
wamt.Circle.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Circle.prototype.destroy=function(){this.scene.removeObject(this)};wamt.collision={};
wamt.collision.screenPointTest=function(a,b,c,d){var e=[];if(a instanceof wamt.Layer)for(var a=a.objects,f=0;f<a.length;f++){var g=a[f];g.collideable&&g!=d&&(g instanceof wamt.Text?g.screenX<=b&&g.screenX+g.bounds[0]>=b&&g.screenY>=c&&g.screenY-g.bounds[1]<=c&&e.push(g):g.screenX<=b&&g.screenX+g.bounds[0]>=b&&g.screenY<=c&&g.screenY+g.bounds[1]>=c&&e.push(g))}else for(var i=a.layers,h=0;h<i.length;h++){a=i[h].objects;for(f=0;f<a.length;f++)g=a[f],g.collideable&&g!=d&&g.screenX<=b&&g.screenX+g.bounds[0]>=
b&&g.screenY<=c&&g.screenY+g.bounds[1]>=c&&e.push(g)}return e};wamt.collision.boxSearch=function(a,b,c,d,e,f){var g=[];if(a instanceof wamt.Layer)for(var a=a.objects,i=0;i<a.length;i++){var h=a[i];h.collideable&&h!=f&&(h.x>b+d||h.x+h.bounds[0]<b||h.y>c+e||h.y+h.bounds[1]<c||g.push(h))}else for(var j=a.layers,l=0;l<j.length;l++){a=j[l].objects;for(i=0;i<a.length;i++)h=a[i],h.collideable&&h!=f&&(h.x>b+d||h.x+h.bounds[0]<b||h.y>c+e||h.y+h.bounds[1]<c||g.push(h))}return g};
wamt.collision.pointTest=function(a,b,c,d){var e=[];if(a instanceof wamt.Layer)for(var a=a.objects,f=0;f<a.length;f++){var g=a[f];g.collideable&&g!=d&&(g instanceof wamt.Text?g.x<=b&&g.x+g.bounds[0]>=b&&g.y>=c&&g.y-g.bounds[1]<=c&&e.push(g):g.x<=b&&g.x+g.bounds[0]>=b&&g.y<=c&&g.y+g.bounds[1]>=c&&e.push(g))}else for(var i=a.layers,h=0;h<i.length;h++){a=i[h].objects;for(f=0;f<a.length;f++)g=a[f],g.collideable&&g!=d&&(g instanceof wamt.Text?g.x<=b&&g.x+g.bounds[0]>=b&&g.y>=c&&g.y-g.bounds[1]<=c&&e.push(g):
g.x<=b&&g.x+g.bounds[0]>=b&&g.y<=c&&g.y+g.bounds[1]>=c&&e.push(g))}return e};
wamt.collision.intersectTest=function(a,b){var c=[];if(a instanceof wamt.Layer)for(var d=a.objects,e=0;e<d.length;e++){var f=d[e];f.collideable&&f!=b&&(f.x>b.x+b.bounds[0]||f.x+f.bounds[0]<b.x||f.y>b.y+b.bounds[1]||f.y+f.bounds[1]<b.y||c.push(f))}else for(var g=a.layers,i=0;i<g.length;i++){d=g[i].objects;for(e=0;e<d.length;e++)f=d[e],f.collideable&&f!=b&&(f.x>b.x+b.bounds[0]||f.x+f.bounds[0]<b.x||f.y>b.y+b.bounds[1]||f.y+f.bounds[1]<b.y||c.push(f))}return c};
wamt.Image=function(a,b,c){var d=document.createElement("canvas");d.setAttribute("width",a);d.setAttribute("height",b);this.canvas=d;this.context=d.getContext("2d");this.width=a;this.height=b;if(typeof c!="undefined")if(c instanceof Image)this.load(c,a,b);else{d=new Image;d.src=c;var e=this;d.onload=function(){e.load(this,a,b)}}else this.empty(a,b)};wamt.Image.prototype.constructor=wamt.Image;
wamt.Image.prototype.setPixel=function(a,b,c,d,e,f){var g=this.data,a=(a+b*this.width)*4;c instanceof Array&&(f=c,c=f[0],d=f[1],e=f[2],f=f[3]);g.data[a+0]=c;g.data[a+1]=d;g.data[a+2]=e;g.data[a+3]=f};wamt.Image.prototype.fillRect=function(a,b,c,d,e){var f=this.context;f.fillStyle=a;f.fillRect(b,c,d,e);this.update()};wamt.Image.prototype.strokeRect=function(a,b,c,d,e){var f=this.context;f.strokeStyle=a;f.strokeRect(b,c,d,e);this.update()};
wamt.Image.prototype.fillText=function(a,b,c,d){var e=this.context;e.fillStyle=a;e.fillText(d,b,c);this.update()};wamt.Image.prototype.strokeText=function(a,b,c,d){var e=this.context;e.strokeStyle=a;e.strokeText(d,b,c);this.update()};wamt.Image.prototype.fillCircle=function(a,b,c,d){var e=this.context;e.fillStyle=a;e.beginPath();e.arc(b,c,d,0,Math.PI*2,!1);e.fill();this.render();this.update()};
wamt.Image.prototype.strokeCircle=function(a,b,c,d){var e=this.context;e.strokeStyle=a;e.beginPath();e.arc(b,c,d,0,Math.PI*2,!1);e.stroke();this.update()};wamt.Image.prototype.fillPolygon=function(a,b,c,d){var e=this.context;e.fillStyle=a;e.beginPath();for(a=0;a<d.length;a++){var f=d[a];e.lineTo(b+f[0],c+f[1])}e.fill();this.update()};
wamt.Image.prototype.strokePolygon=function(a,b,c,d){var e=this.context;e.strokeStyle=a;e.beginPath();for(a=0;a<d.length;a++){var f=d[a];e.lineTo(b+f[0],c+f[1])}e.stroke();this.update()};wamt.Image.prototype.fillLine=function(a,b,c,d,e){var f=this.context;f.fillStyle=a;f.beginPath();f.save();f.translate(b,c);f.lineTo(d,e);f.fill();f.restore();this.render();this.update()};
wamt.Image.prototype.strokeLine=function(a,b,c,d,e){var f=this.context;f.strokeStyle=a;f.beginPath();f.save();f.translate(b,c);f.lineTo(d,e);f.stroke();f.restore();this.render();this.update()};wamt.Image.prototype.getPixel=function(a,b){var c=this.data,d=(a+b*this.width)*4;return[c.data[d+0],c.data[d+1],c.data[d+2],c[d+3]]};wamt.Image.prototype.update=function(){this.data=this.context.getImageData(0,0,0,0,this.width,this.height)};
wamt.Image.prototype.render=function(){var a=this.canvas;a.width=this.width;a.height=this.height;this.context.putImageData(this.data,0,0);return this.canvas};wamt.Image.prototype.empty=function(a,b){var c=this.canvas,d=this.context;c.width=a;c.height=b;this.width=a;this.height=b;this.data=d.createImageData(a,b);this.render()};
wamt.Image.prototype.load=function(a,b,c){var d=this.canvas,e=this.context;if(typeof b=="undefined")b=a.width;if(typeof c=="undefined")c=a.height;this.width=b;this.height=c;d.width=b;d.height=c;e.drawImage(a,0,0,b,c);this.data=e.getImageData(0,0,b,c)};
wamt.Light=function(a,b,c,d){this.events=[];this.collideable=!1;this.x=typeof c=="undefined"?0:c;this.y=typeof d=="undefined"?0:d;this.velocity=[0,0];this.screenX=this.x;this.screenY=this.y;this.intensity=b;this.color=a;this.visible=!0;this.opacity=1;this.computeBounds()};wamt.Light.prototype.constructor=wamt.Light;wamt.Light.prototype.computeBounds=function(){this.bounds=[this.intensity*2,this.intensity*2]};wamt.Light.prototype.setVisible=function(a){this.visible=a;this.scene.updated=!0};
wamt.Light.prototype.logic=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prelogic(this);if(this.velocity[0]!=0||this.velocity[1]!=0)b?this.behaviour.velocity(this):this.translate(this.velocity[0],this.velocity[1]);b&&this.behaviour.logic(this);this.processEvent("logic",{object:this,scene:a})};
wamt.Light.prototype.tick=function(a,b,c){var d=typeof this.behaviour!="undefined";d&&this.behaviour.pretick(this);if(a.updated){b.locked?(this.screenX=this.x,this.screenY=this.y):(this.screenX=-c.x+this.x+c.canvas.width/2,this.screenY=-c.y+this.y+c.canvas.height/2);for(var e=b.objects,f=0;f<e.length;f++){var g=e[f];if(g.shadowcast){var i=g.x-this.x,h=g.y-this.y;if(Math.abs(i)>this.intensity*1.5||Math.abs(h)>this.intensity*1.5)g.setShadow(0,0,0,"rgba(0,0,0,0");else{var j=0.3/this.intensity;g.setShadow(i*
j*g.bounds[0],h*j*g.bounds[1],this.intensity*j,"rgba(0,0,0,0.35)")}}}}d&&this.behaviour.tick(this);this.processEvent("tick",{object:this,scene:a,layer:b,view:c})};
wamt.Light.prototype.render=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prerender(this);var c=a.context,d=c.createRadialGradient(this.screenX,this.screenY,0,this.screenX,this.screenY,this.intensity);d.addColorStop(0,this.color);d.addColorStop(1,"rgba(0,0,0,0)");c.fillStyle=d;c.beginPath();c.arc(this.screenX,this.screenY,this.intensity,0,Math.PI*2,!1);c.fill();c.fillStyle="";b&&this.behaviour.render(this);this.processEvent("render",{object:this,view:a})};
wamt.Light.prototype.setColor=function(a,b,c,d){this.color=a instanceof Array?a:[a,b,c,d];this.scene.updated=!0};wamt.Light.prototype.setIntensity=function(a){a<1&&(a=1);this.intensity=a;this.computeBounds();this.scene.updated=!0};wamt.Light.prototype.intensify=function(a){this.intensity+=a;if(this.intensity<1)this.intensity=1;this.computeBounds();this.scene.updated=!0};wamt.Light.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};
wamt.Light.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.Light.prototype.setY=function(a){this.y=a;this.scene.updated=!0};wamt.Light.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};wamt.Light.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};wamt.Light.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};wamt.Light.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};
wamt.Light.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};wamt.Light.prototype.setVelocity=function(a,b){this.velocity=[a,b];this.scene.updated=!0};wamt.Light.prototype.stop=function(){this.velocity=[0,0];this.scene.updated=!0};wamt.Light.prototype.setBehaviour=function(a){this.behaviour=a;typeof a!="undefined"&&a.init(this);this.scene.updated=!0};wamt.Light.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};
wamt.Light.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Light.prototype.destroy=function(){this.scene.removeObject(this)};
wamt.Polygon=function(a,b,c,d,e){this.events=[];this.collideable=!0;this.x=typeof c=="undefined"?0:c;this.y=typeof d=="undefined"?0:d;this.velocity=[0,0];this.screenX=this.x;this.screenY=this.y;this.angle=typeof e=="undefined"?0:e;this.radians=typeof e=="undefined"?0:Math.radians(e);this.vertices=b;this.style=a;this.shadow=[0,0,0,"rgba(0,0,0,0)"];this.shadowcast=!1;this.visible=!0;this.opacity=1;this.computeBounds()};wamt.Polygon.prototype.constructor=wamt.Polygon;
wamt.Polygon.prototype.computeBounds=function(){for(var a=0,b=0,c=0,d=0,e=0;e<this.vertices.length;e++)var f=this.vertices[e],g=Math.min(a,f[0]),i=Math.min(b,f[0]),h=Math.max(c,f[1]),f=Math.max(d,f[1]),a=g<a?g:a,b=i<b?i:b,c=h>c?h:c,d=f>d?f:d;this.bounds=this.angle?[Math.abs(Math.cos(this.angle)*(c-a)),Math.abs(Math.sin(this.angle)*(d-b))]:[c-a,d-b]};wamt.Polygon.prototype.setColliding=function(a){this.collideable=a;this.scene.updated=!0};
wamt.Polygon.prototype.setVisible=function(a){this.visible=a;this.scene.updated=!0};wamt.Polygon.prototype.setHollow=function(a){this.hollow=a;this.scene.updated=!0};wamt.Polygon.prototype.logic=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prelogic(this);if(this.velocity[0]!=0||this.velocity[1]!=0)b?this.behaviour.velocity(this):this.translate(this.velocity[0],this.velocity[1]);b&&this.behaviour.logic(this);this.processEvent("logic",{object:this,scene:a})};
wamt.Polygon.prototype.tick=function(a,b,c){var d=typeof this.behaviour!="undefined";d&&this.behaviour.pretick(this);var e=c.canvas;if(a.updated)b.locked?(this.screenX=this.x,this.screenY=this.y):(this.screenX=-c.x+this.x+e.width/2,this.screenY=-c.y+this.y+e.height/2);d&&this.behaviour.tick(this);this.processEvent("tick",{object:this,scene:a,layer:b,view:c})};
wamt.Polygon.prototype.render=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prerender(this);var c=this.radians,d=a.context;d.fillStyle=this.style;d.strokeStyle=this.style;d.shadowOffsetX=this.shadow[0];d.shadowOffsetY=this.shadow[1];d.shadowBlur=this.shadow[2];d.shadowColor=this.shadow[3];var e=this.vertices;if(c==0){d.beginPath();for(c=0;c<e.length;c++){var f=e[c];d.lineTo(this.screenX+f[0],this.screenY+f[1])}this.hollow?d.stroke():d.fill()}else{var f=this.width/2+this.screenX,
g=this.height/2+this.screenY;d.save();d.translate(f,g);d.rotate(c);d.translate(-f,-g);d.beginPath();for(c=0;c<e.length;c++)f=e[c],d.lineTo(this.screenX+f[0],this.screenY+f[1]);this.hollow?d.stroke():d.fill();d.restore()}d.fillStyle="";d.strokeStyle="";d.shadowOffsetX="";d.shadowOffsetY="";d.shadowBlur="";d.shadowColor="";b&&this.behaviour.render(this);this.processEvent("render",{object:this,view:a})};
wamt.Polygon.prototype.setVertices=function(a){this.vertices=a;this.computeBounds();this.scene.updated=!0};wamt.Polygon.prototype.stretchX=function(a){for(var b=this.vertices,c=0;c<b.length;c++)vertice=b[c],vertice[0]+=a;this.computeBounds();this.scene.updated=!0};wamt.Polygon.prototype.stretchY=function(a){for(var b=this.vertices,c=0;c<b.length;c++)vertice=b[c],vertice[1]+=a;this.computeBounds();this.scene.updated=!0};
wamt.Polygon.prototype.stretch=function(a,b){for(var c=this.vertices,d=0;d<c.length;d++)vertice=c[d],vertice[0]+=a,vertice[1]+=b;this.computeBounds();this.scene.updated=!0};wamt.Polygon.prototype.setStyle=function(a){this.style=a;this.scene.updated=!0};wamt.Polygon.prototype.setShadow=function(a,b,c,d){this.shadow=[a,b,c,d];this.scene.updated=!0};wamt.Polygon.prototype.setShadowCasting=function(a){this.shadowcast=a;this.scene.updated=!0};
wamt.Polygon.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};wamt.Polygon.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.Polygon.prototype.setY=function(a){this.y=a;this.scene.updated=!0};wamt.Polygon.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};wamt.Polygon.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};wamt.Polygon.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};
wamt.Polygon.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};wamt.Polygon.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};wamt.Polygon.prototype.setVelocity=function(a,b){this.velocity=[a,b];this.scene.updated=!0};wamt.Polygon.prototype.stop=function(){this.velocity=[0,0];this.scene.updated=!0};wamt.Polygon.prototype.setAngle=function(a){this.angle=a%360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};
wamt.Polygon.prototype.rotate=function(a){this.angle+=a;this.angle%=360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Polygon.prototype.setBehaviour=function(a){this.behaviour=a;typeof a!="undefined"&&a.init(this);this.scene.updated=!0};wamt.Polygon.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};
wamt.Polygon.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Polygon.prototype.destroy=function(){this.scene.removeObject(this)};
wamt.Sprite=function(a,b,c,d){a=typeof a.data!="undefined"?a.canvas:a;this.events=[];this.collideable=!0;this.image=a;this.x=typeof b=="undefined"?0:b;this.y=typeof c=="undefined"?0:c;this.velocity=[0,0];this.tileHeight=this.tileWidth=0;this.tileAnimation="";this.tileAnimationSpeed=this.tileAnimationFrame=0;this.tileAnimations=[];this.screenX=this.x;this.screenY=this.y;this.angle=typeof d=="undefined"?0:d;this.radians=typeof d=="undefined"?0:Math.radians(d);this.width=(b=typeof a.videoWidth!="undefined")?
a.videoWidth:a.width;this.height=b?a.videoHeight:a.height;this.shadow=[0,0,0,"rgba(0,0,0,0)"];this.shadowcast=!1;this.visible=!0;this.opacity=1;this.computeBounds()};wamt.Sprite.prototype.constructor=wamt.Sprite;wamt.Sprite.prototype.computeBounds=function(){this.bounds=this.angle==0||this.angle==180?[this.width,this.height]:this.angle==90||this.angle==270?[this.height,this.width]:[Math.abs(Math.cos(this.angle)*this.width),Math.abs(Math.sin(this.angle)*this.height)]};
wamt.Sprite.prototype.setColliding=function(a){this.collideable=a};wamt.Sprite.prototype.setVisible=function(a){this.visible=a;this.scene.updated=!0};wamt.Sprite.prototype.logic=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prelogic(this);if(this.velocity[0]!=0||this.velocity[1]!=0)b?this.behaviour.velocity(this):this.translate(this.velocity[0],this.velocity[1]);b&&this.behaviour.logic(this);this.processEvent("logic",{object:this,scene:a})};
wamt.Sprite.prototype.tick=function(a,b,c){var d=typeof this.behaviour!="undefined";d&&this.behaviour.pretick(this);if(a.updated)b.locked?(this.screenX=this.x,this.screenY=this.y):(this.screenX=-c.x+this.x+c.canvas.width/2,this.screenY=-c.y+this.y+c.canvas.height/2);d&&this.behaviour.tick(this);this.processEvent("tick",{object:this,scene:a,layer:b,view:c})};
wamt.Sprite.prototype.render=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prerender(this);var c=this.radians,d=a.context;d.shadowOffsetX=this.shadow[0];d.shadowOffsetY=this.shadow[1];d.shadowBlur=this.shadow[2];d.shadowColor=this.shadow[3];var e=this.tileAnimations[this.tileAnimation],f=this.image;if(typeof e=="undefined")if(c==0)d.drawImage(f,this.screenX,this.screenY,this.width,this.height);else{var g=this.width/2+this.screenX,i=this.height/2+this.screenY;d.save();d.translate(g,
i);d.rotate(c);d.translate(-g,-i);d.drawImage(f,this.screenX,this.screenY,this.width,this.height);d.restore()}else{var h=Math.floor(this.tileAnimationFrame);this.tileAnimationFrame+=this.tileAnimationSpeed/wamt.delta;if(this.tileAnimationFrame>e[2]*e[3]+1)this.tileAnimationFrame=0;g=Math.floor(this.tileAnimationFrame);g!=h&&this.processEvent("frame");var h=Math.floor(g%e[2]),j=Math.floor(g%e[3]);c==0?d.drawImage(f,e[0]*this.tileWidth+h*this.tileWidth,e[1]*this.tileHeight+j*this.tileHeight,this.tileWidth,
this.tileHeight,this.screenX,this.screenY,this.width,this.height):(g=this.width/2+this.screenX,i=this.height/2+this.screenY,d.save(),d.translate(g,i),d.rotate(c),d.translate(-g,-i),d.drawImage(f,e[0]*this.tileWidth+h*this.tileWidth,e[1]*this.tileHeight+j*this.tileHeight,this.tileWidth,this.tileHeight,this.screenX,this.screenY,this.width,this.height),d.restore())}d.shadowOffsetX="";d.shadowOffsetY="";d.shadowBlur="";d.shadowColor="";b&&this.behaviour.render(this);this.processEvent("render",{object:this,
view:a})};wamt.Sprite.prototype.setImage=function(a){a=typeof a.data!="undefined"?a.canvas:a;this.clearTileAnimations();this.image=a;var b=typeof a.videoWidth!="undefined";this.width=b?a.videoWidth:a.width;this.height=b?a.videoHeight:a.height;this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.setTiling=function(a,b){this.width=a;this.height=b;this.computeBounds();this.tileWidth=a;this.tileHeight=b;this.scene.updated=!0};
wamt.Sprite.prototype.clearTileAnimations=function(){this.tileAnimation="";this.tileAnimationSpeed=this.tileAnimationFrame=0;this.tileAnimations=[]};wamt.Sprite.prototype.addTileAnimation=function(a,b,c,d,e){this.tileAnimations[a]=[b,c,d,e]};
wamt.Sprite.prototype.playTileAnimation=function(a,b){var c=this.tileAnimations[a];if(typeof c!="undefined"){b=typeof b=="number"?b:1;c[0]==c[2]&&c[1]==c[3]&&(b=0);if(a!=this.tileAnimation)this.tileAnimationFrame=0;this.tileAnimation=a;this.tileAnimationSpeed=b;this.scene.updated=!0}};wamt.Sprite.prototype.setTileAnimationSpeed=function(a){animation[0]==animation[2]&&animation[1]==animation[3]&&(a=0);this.tileAnimationSpeed=a;this.scene.updated=1};
wamt.Sprite.prototype.pauseTileAnimation=function(){this.tileAnimationSpeed=0};wamt.Sprite.prototype.setWidth=function(a){a<1&&(a=1);this.width=a;this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.setHeight=function(a){a<1&&(a=1);this.height=a;this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.setSize=function(a,b){a<1&&(a=1);b<1&&(b=1);this.width=a;this.height=b;this.computeBounds();this.scene.updated=!0};
wamt.Sprite.prototype.stretchX=function(a){this.width+=a;if(this.width<1)this.width=1;this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.stretchY=function(a){this.height+=a;if(this.height<1)this.height=1;this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.stretch=function(a,b){this.width+=a;if(this.width<1)this.width=1;this.height+=b;if(this.height<1)this.height=1;this.computeBounds();this.scene.updated=!0};
wamt.Sprite.prototype.setShadow=function(a,b,c,d){this.shadow=[a,b,c,d];this.scene.updated=!0};wamt.Sprite.prototype.setShadowCasting=function(a){this.shadowcast=a;this.scene.updated=!0};wamt.Sprite.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};wamt.Sprite.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.Sprite.prototype.setY=function(a){this.y=a;this.scene.updated=!0};wamt.Sprite.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};
wamt.Sprite.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};wamt.Sprite.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};wamt.Sprite.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};wamt.Sprite.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};wamt.Sprite.prototype.setVelocity=function(a,b){this.velocity=[a,b];this.scene.updated=!0};wamt.Sprite.prototype.stop=function(){this.velocity=[0,0];this.scene.updated=!0};
wamt.Sprite.prototype.setAngle=function(a){this.angle=a%360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.rotate=function(a){this.angle+=a;this.angle%=360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Sprite.prototype.setBehaviour=function(a){this.behaviour=a;typeof a!="undefined"&&a.init(this);this.scene.updated=!0};
wamt.Sprite.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};wamt.Sprite.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Sprite.prototype.destroy=function(){this.scene.removeObject(this)};
wamt.Text=function(a,b,c,d,e,f){this.events=[];this.collideable=!1;this.x=typeof d=="undefined"?0:d;this.y=typeof e=="undefined"?0:e;this.velocity=[0,0];this.screenX=this.x;this.screenY=this.y;this.angle=typeof f=="undefined"?0:f;this.radians=typeof f=="undefined"?0:Math.radians(f);this.width=1;this.height=10;this.text=String(a).split("\n");this.font=b;this.style=c;this.align="start";this.shadow=[0,0,0,"rgba(0,0,0,0)"];this.hollow=!1;this.visible=!0;this.opacity=1;this.updated=!0;this.computeBounds()};
wamt.Text.prototype.constructor=wamt.Text;wamt.Text.prototype.computeBounds=function(){this.bounds=this.angle==0||this.angle==180?[this.width,this.height]:this.angle==90||this.angle==270?[this.height,this.width]:[Math.abs(Math.cos(this.angle)*this.width),Math.abs(Math.sin(this.angle)*this.height)]};wamt.Text.prototype.setColliding=function(a){this.collideable=a};wamt.Text.prototype.setVisible=function(a){this.visible=a;this.scene.updated=!0};
wamt.Text.prototype.setHollow=function(a){this.hollow=a;this.scene.updated=!0};wamt.Text.prototype.logic=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prelogic(this);if(this.velocity[0]!=0||this.velocity[1]!=0)b?this.behaviour.velocity(this):this.translate(this.velocity[0],this.velocity[1]);b&&this.behaviour.logic(this);this.processEvent("logic",{object:this,scene:a})};
wamt.Text.prototype.tick=function(a,b,c){var d=typeof this.behaviour!="undefined";d&&this.behaviour.pretick(this);if(a.updated){if(this.updated){this.width=c.context.measureText(this.text).width;var e=this.font.indexOf("px");e!=-1?(e=this.font.substring(0,e),this.height=parseInt(e)):this.height=10;this.computeBounds();this.updated=!1}b.locked?(this.screenX=this.x,this.screenY=this.y):(this.screenX=-c.x+this.x+c.canvas.width/2,this.screenY=-c.y+this.y+c.canvas.height/2)}d&&this.behaviour.tick(this);
this.processEvent("tick",{object:this,scene:a,layer:b,view:c})};
wamt.Text.prototype.render=function(a){var b=typeof this.behaviour!="undefined";b&&this.behaviour.prerender(this);var c=this.radians,d=a.context;d.strokeStyle=this.style;d.fillStyle=this.style;d.font=this.font;d.textAlign=this.align;d.shadowOffsetX=this.shadow[0];d.shadowOffsetY=this.shadow[1];d.shadowBlur=this.shadow[2];d.shadowColor=this.shadow[3];if(c==0)if(this.hollow)for(c=0;c<this.text.length;c++){var e=this.text[c];d.strokeText(e,this.screenX,this.screenY+c*this.height*1.5)}else for(c=0;c<
this.text.length;c++)e=this.text[c],d.fillText(e,this.screenX,this.screenY+c*this.height*1.5);else{var e=this.width/2+this.screenX,f=this.height/2+this.screenY;d.save();d.translate(e,f);d.rotate(c);d.translate(-e,-f);if(this.hollow)for(c=0;c<this.text.length;c++)e=this.text[c],d.strokeText(e,this.screenX,this.screenY+c*this.height*1.5);else for(c=0;c<this.text.length;c++)e=this.text[c],d.fillText(e,this.screenX,this.screenY+c*this.height*1.5);d.restore()}d.strokeStyle="";d.fillStyle="";d.font="";
d.shadowOffsetX="";d.shadowOffsetY="";d.shadowBlur="";d.shadowColor="";b&&this.behaviour.render(this);this.processEvent("render",{object:this,view:a})};wamt.Text.prototype.setStyle=function(a){this.style=a;this.updated=!0;this.scene.updated=!0};wamt.Text.prototype.setFont=function(a){this.font=a;this.updated=!0;this.scene.updated=!0};wamt.Text.prototype.setText=function(a){this.text=String(a).split("\n");this.updated=!0;this.scene.updated=!0};
wamt.Text.prototype.setTextAlign=function(a){this.align=a;this.scene.updated=!0};wamt.Text.prototype.setShadow=function(a,b,c,d){this.shadow=[a,b,c,d];this.scene.updated=!0};wamt.Text.prototype.setShadowCasting=function(a){this.shadowcast=a;this.scene.updated=!0};wamt.Text.prototype.setOpacity=function(a){this.opacity=a;this.scene.updated=!0};wamt.Text.prototype.setX=function(a){this.x=a;this.scene.updated=!0};wamt.Text.prototype.setY=function(a){this.y=a;this.scene.updated=!0};
wamt.Text.prototype.setPosition=function(a,b){this.x=a;this.y=b;this.scene.updated=!0};wamt.Text.prototype.snap=function(a,b){this.translate(-(this.x%a),-(this.y%b))};wamt.Text.prototype.translateX=function(a){this.x+=a;this.scene.updated=!0};wamt.Text.prototype.translateY=function(a){this.y+=a;this.scene.updated=!0};wamt.Text.prototype.translate=function(a,b){this.x+=a;this.y+=b;this.scene.updated=!0};wamt.Text.prototype.setVelocity=function(a,b){this.velocity=[a,b];this.scene.updated=!0};
wamt.Text.prototype.stop=function(){this.velocity=[0,0];this.scene.updated=!0};wamt.Text.prototype.setAngle=function(a){this.angle=a%360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Text.prototype.rotate=function(a){this.angle+=a;this.angle%=360;this.radians=Math.radians(this.angle);this.computeBounds();this.scene.updated=!0};wamt.Text.prototype.setBehaviour=function(a){this.behaviour=a;typeof a!="undefined"&&a.init(this);this.scene.updated=!0};
wamt.Text.prototype.addEventListener=function(a,b){typeof this.events[a]=="undefined"&&(this.events[a]=[]);this.events[a].push(b)};wamt.Text.prototype.processEvent=function(a,b){var c=this.events[a];if(typeof c!="undefined")for(var d=0;d<c.length;d++)c[d](b)};wamt.Text.prototype.destroy=function(){this.scene.removeObject(this)};
